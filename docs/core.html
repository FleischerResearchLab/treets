---

title: Time Restricted Eating ExperimenTS API


keywords: fastai
sidebar: home_sidebar

summary: "Process collected data from mcc app."
description: "Process collected data from mcc app."
nb_path: "00_core.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 00_core.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="utils">utils<a class="anchor-link" href="#utils"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="file_loader" class="doc_header"><code>file_loader</code><a href="https://github.com/FleischerResearchLab/treets/tree/master/treets/core.py#L41" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>file_loader</code>(<strong><code>data_source</code></strong>)</p>
</blockquote>
<p>Description:</p>

<pre><code>This is a helper function that 1. if data_scource is a single file path in pickle/csv format, it reads it into a pd dataframe. 2. if it is a folder path, it reads csv and pickle files that match the pattern parameter in the data_scource folder into one dataframe. 


</code></pre>
<p>Input:</p>

<pre><code>- data_source(str, pandas df): input path, csv or pickle file or a pattern to be matched when searching csv/pickle files that will be read into one dataframe.

</code></pre>
<p>Output:</p>

<pre><code>- a pandas dataframe.</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This reads a specific csv file into a pd dataframe.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">file_loader</span><span class="p">(</span><span class="s2">&quot;data/col_test_data/toy_data_2000.csv&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Unnamed: 0</th>
      <th>original_logtime</th>
      <th>desc_text</th>
      <th>food_type</th>
      <th>PID</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>2021-05-12 02:30:00 +0000</td>
      <td>milk</td>
      <td>b</td>
      <td>yrt1999</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>2021-05-12 02:45:00 +0000</td>
      <td>some medication</td>
      <td>m</td>
      <td>yrt1999</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This reads in all files that matches yrt*_food_data*.csv pattern in data/col_test_data folder</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">file_loader</span><span class="p">(</span><span class="s1">&#39;data/col_test_data/yrt*_food_data*.csv&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Unnamed: 0</th>
      <th>original_logtime</th>
      <th>desc_text</th>
      <th>food_type</th>
      <th>PID</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>2021-05-12 02:30:00 +0000</td>
      <td>Milk</td>
      <td>b</td>
      <td>yrt1999</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>2021-05-12 02:45:00 +0000</td>
      <td>Some Medication</td>
      <td>m</td>
      <td>yrt1999</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This reads all pickle and csv files in ./data/output folder.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">file_loader</span><span class="p">(</span><span class="s1">&#39;data/output/*&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Unnamed: 0</th>
      <th>ID</th>
      <th>unique_code</th>
      <th>research_info_id</th>
      <th>desc_text</th>
      <th>food_type</th>
      <th>original_logtime</th>
      <th>original_logtime_notz</th>
      <th>date</th>
      <th>local_time</th>
      <th>time</th>
      <th>week_from_start</th>
      <th>year</th>
      <th>cleaned</th>
      <th>day_count</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1340217.0</td>
      <td>3806061.0</td>
      <td>alqt14018795225</td>
      <td>150.0</td>
      <td>Vegetarian Chili</td>
      <td>f</td>
      <td>2018-03-02 04:21:00+00:00</td>
      <td>2018-03-02 04:21:00+00:00</td>
      <td>2018-03-02</td>
      <td>4.350000</td>
      <td>04:21:00</td>
      <td>13.0</td>
      <td>2018.0</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1340218.0</td>
      <td>8677718.0</td>
      <td>alqt14018795225</td>
      <td>150.0</td>
      <td>Icecream</td>
      <td>f</td>
      <td>2018-03-02 04:41:00+00:00</td>
      <td>2018-03-02 04:41:00+00:00</td>
      <td>2018-03-02</td>
      <td>4.683333</td>
      <td>04:41:00</td>
      <td>13.0</td>
      <td>2018.0</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="find_date" class="doc_header"><code>find_date</code><a href="https://github.com/FleischerResearchLab/treets/tree/master/treets/core.py#L72" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>find_date</code>(<strong><code>data_source</code></strong>, <strong><code>col</code></strong>, <strong><code>h</code></strong>=<em><code>0</code></em>)</p>
</blockquote>
<p>Description:</p>

<pre><code>Extract date information from a column and shift each date in the column by h hours. (Day starts h hours early if h is negative and h hours late if h is positive)


</code></pre>
<p>Input:</p>

<pre><code>- data_scource(str, pandas df): input path, file in pickle, csv or pandas dataframe format

- col(str) : column that contains the information of date and time, which is 24 hours system.
- h(int) : hours to shift the date. For example, when h = 4, everyday starts and ends 4 hours later than normal.

</code></pre>
<p>Return:</p>

<pre><code>- a pandas series represents the date extracted from col.


</code></pre>
<p>Requirements:</p>

<pre><code>Elements in col should be pd.datetime objects</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">file_loader</span><span class="p">(</span><span class="s1">&#39;data/test_food_details.csv&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;original_logtime&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;original_logtime&#39;</span><span class="p">])</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">find_date</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;original_logtime&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="p">[[</span><span class="s1">&#39;original_logtime&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>original_logtime</th>
      <th>date</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2017-12-08 17:30:00+00:00</td>
      <td>2017-12-08</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2017-12-09 00:01:00+00:00</td>
      <td>2017-12-09</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2017-12-09 00:58:00+00:00</td>
      <td>2017-12-09</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">find_date</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;original_logtime&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">df</span><span class="p">[[</span><span class="s1">&#39;original_logtime&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="c1"># last two rows shift one day earlier due to that a day starts at 4 </span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>original_logtime</th>
      <th>date</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2017-12-08 17:30:00+00:00</td>
      <td>2017-12-08</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2017-12-09 00:01:00+00:00</td>
      <td>2017-12-08</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2017-12-09 00:58:00+00:00</td>
      <td>2017-12-08</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">find_date</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;original_logtime&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">)</span>
<span class="n">df</span><span class="p">[[</span><span class="s1">&#39;original_logtime&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>original_logtime</th>
      <th>date</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2017-12-08 17:30:00+00:00</td>
      <td>2017-12-08</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2017-12-09 00:01:00+00:00</td>
      <td>2017-12-09</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2017-12-09 00:58:00+00:00</td>
      <td>2017-12-09</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2018-02-22 21:52:00+00:00</td>
      <td>2018-02-23</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2018-02-22 22:53:00+00:00</td>
      <td>2018-02-23</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>note that last two rows shift one day later due to that a day ends at 20</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="find_float_time" class="doc_header"><code>find_float_time</code><a href="https://github.com/FleischerResearchLab/treets/tree/master/treets/core.py#L105" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>find_float_time</code>(<strong><code>data_scource</code></strong>, <strong><code>col</code></strong>, <strong><code>h</code></strong>=<em><code>0</code></em>)</p>
</blockquote>
<p>Description:</p>

<pre><code>Extract time information from a column and shift each time by h hours. (Day starts h hours early if h is negative and h hours late if h is positive)


</code></pre>
<p>Input:</p>

<pre><code>- data_scource (str, pandas df): input path, file in pickle, csv or pandas dataframe format

- col(str) : column that contains the information of date and time that's 24 hours system.
- h(int) : hours to shift the date. For example, when h = 4, everyday starts at 4 and ends at 28. When h = -4, everyday starts at -4 and ends at 20.

</code></pre>
<p>Return:</p>

<pre><code>- a pandas series represents the date extracted from col.


</code></pre>
<p>Requirements:</p>

<pre><code>Elements in col should be pd.datetime objects</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">file_loader</span><span class="p">(</span><span class="s1">&#39;data/test_food_details.csv&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;original_logtime&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;original_logtime&#39;</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;float_time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">find_float_time</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;original_logtime&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="p">[[</span><span class="s1">&#39;original_logtime&#39;</span><span class="p">,</span> <span class="s1">&#39;float_time&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>original_logtime</th>
      <th>float_time</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2017-12-08 17:30:00+00:00</td>
      <td>17.500000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2017-12-09 00:01:00+00:00</td>
      <td>0.016667</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2017-12-09 00:58:00+00:00</td>
      <td>0.966667</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;float_time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">find_float_time</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;original_logtime&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">find_date</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;original_logtime&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">df</span><span class="p">[[</span><span class="s1">&#39;original_logtime&#39;</span><span class="p">,</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;float_time&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="c1"># last two rows shift one day earlier due to that a day starts at 4 and ends at 28</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>original_logtime</th>
      <th>date</th>
      <th>float_time</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2017-12-08 17:30:00+00:00</td>
      <td>2017-12-08</td>
      <td>17.500000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2017-12-09 00:01:00+00:00</td>
      <td>2017-12-08</td>
      <td>24.016667</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2017-12-09 00:58:00+00:00</td>
      <td>2017-12-08</td>
      <td>24.966667</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;float_time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">find_float_time</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;original_logtime&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">find_date</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;original_logtime&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">)</span>
<span class="n">df</span><span class="p">[[</span><span class="s1">&#39;original_logtime&#39;</span><span class="p">,</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;float_time&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="c1"># last two rows shift one day later and local_time starts at -4 and ends at 20</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>original_logtime</th>
      <th>date</th>
      <th>float_time</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2017-12-08 17:30:00+00:00</td>
      <td>2017-12-08</td>
      <td>17.500000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2017-12-09 00:01:00+00:00</td>
      <td>2017-12-09</td>
      <td>0.016667</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2017-12-09 00:58:00+00:00</td>
      <td>2017-12-09</td>
      <td>0.966667</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2018-02-22 21:52:00+00:00</td>
      <td>2018-02-23</td>
      <td>-2.133333</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2018-02-22 22:53:00+00:00</td>
      <td>2018-02-23</td>
      <td>-1.116667</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="week_from_start" class="doc_header"><code>week_from_start</code><a href="https://github.com/FleischerResearchLab/treets/tree/master/treets/core.py#L136" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>week_from_start</code>(<strong><code>data_scource</code></strong>, <strong><code>col</code></strong>, <strong><code>identifier</code></strong>)</p>
</blockquote>
<p>Description:</p>

<pre><code>Calculate the number of weeks for each logging since the first day of the logging for each participant(identifier). The returned values for loggings from the first week are 1.
</code></pre>
<p>Input:</p>

<pre><code>- data_scource (str, pandas df): input path, file in pickle, csv or pandas dataframe format

- col (str): column name that contains date information from the data_scource dataframe.
- identifier (str): unique_id or ID, or name that identifies people.

</code></pre>
<p>Return:</p>

<pre><code>- a numpy array represents the date extracted from col.</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">file_loader</span><span class="p">(</span><span class="s1">&#39;data/test_food_details.csv&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;original_logtime&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;original_logtime&#39;</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">find_date</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;original_logtime&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;week_from_start&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">week_from_start</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;unique_code&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="p">[[</span><span class="s1">&#39;unique_code&#39;</span><span class="p">,</span><span class="s1">&#39;original_logtime&#39;</span><span class="p">,</span><span class="s1">&#39;week_from_start&#39;</span><span class="p">]][</span><span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>unique_code</th>
      <th>original_logtime</th>
      <th>week_from_start</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2</th>
      <td>alqt14018795225</td>
      <td>2017-12-09 00:58:00+00:00</td>
      <td>1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>alqt14018795225</td>
      <td>2018-02-22 21:52:00+00:00</td>
      <td>11</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="find_phase_duration" class="doc_header"><code>find_phase_duration</code><a href="https://github.com/FleischerResearchLab/treets/tree/master/treets/core.py#L161" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>find_phase_duration</code>(<strong><code>df</code></strong>)</p>
</blockquote>
<p>Description:</p>

<pre><code>This is a function that calculates how many days each phase in the study took. Result includes the start and end date for that phase.

</code></pre>
<p>Input:</p>

<pre><code>- df(pandas df) : information dataframe that contains columns: Start_Day, End_day

</code></pre>
<p>Output:</p>

<pre><code>- a dataframe contains the phase_duration column.

</code></pre>
<p>Requirement:</p>

<pre><code>- 'Start_day' and 'End_day' column exist in the df.
- 'phase_duration' column exists in the df.</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">find_phase_duration</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s1">&#39;data/col_test_data/toy_data_17May2021.xlsx&#39;</span><span class="p">))[[</span><span class="s1">&#39;phase_duration&#39;</span><span class="p">]]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>phase_duration</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>3 days</td>
    </tr>
    <tr>
      <th>1</th>
      <td>4 days</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3 days</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4 days</td>
    </tr>
    <tr>
      <th>4</th>
      <td>NaT</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="load_food_data" class="doc_header"><code>load_food_data</code><a href="https://github.com/FleischerResearchLab/treets/tree/master/treets/core.py#L180" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>load_food_data</code>(<strong><code>data_scource</code></strong>, <strong><code>identifier</code></strong>, <strong><code>datetime_col</code></strong>, <strong><code>h</code></strong>)</p>
</blockquote>
<p>Description:</p>

<pre><code>Load food data and output processed data in a dataframe.


Process includes:

1. Dropping 'foodimage_file_name' column.

2. Handling the format of time by deleting am/pm by generating a new column, 'original_logtime_notz'

3. Generating the date column with possible hour shifts, 'date'

4. Converting time into float number into a new column with possible hour shifts, 'float_time'

5. Converting time to a format of HH:MM:SS, 'time'

6. Generating the column 'week_from_start' that contains the week number that the participants input the food item.

7. Generating 'year' column based on the input data.


</code></pre>
<p>Input:</p>

<pre><code>- data_scource (str or pandas df): input path, csv file

- identifier(str): id-like column that's used to identify a subject.

- datetime_col(str): column that contains date and time in string format.

- h(int) : hours to shift the date. For example, when h = 4, everyday starts and ends 4 hours later than normal.

</code></pre>
<p>Output:</p>

<pre><code>- the processed dataframe in pandas df format.


</code></pre>
<p>Requirements:</p>

<pre><code>data_scource file must have the following columns:

    - foodimage_file_name

    - original_logtime

    - date

    - unique_code</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">load_food_data</span><span class="p">(</span><span class="s1">&#39;data/test_food_details.csv&#39;</span><span class="p">,</span><span class="s1">&#39;unique_code&#39;</span><span class="p">,</span> <span class="s1">&#39;original_logtime&#39;</span><span class="p">,</span> <span class="n">h</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Unnamed: 0</th>
      <th>ID</th>
      <th>unique_code</th>
      <th>research_info_id</th>
      <th>desc_text</th>
      <th>food_type</th>
      <th>original_logtime</th>
      <th>date</th>
      <th>float_time</th>
      <th>time</th>
      <th>week_from_start</th>
      <th>year</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1340147</td>
      <td>7572733</td>
      <td>alqt14018795225</td>
      <td>150</td>
      <td>Water</td>
      <td>w</td>
      <td>2017-12-08 17:30:00+00:00</td>
      <td>2017-12-08</td>
      <td>17.500000</td>
      <td>17:30:00</td>
      <td>1</td>
      <td>2017</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1340148</td>
      <td>411111</td>
      <td>alqt14018795225</td>
      <td>150</td>
      <td>Coffee White</td>
      <td>b</td>
      <td>2017-12-09 00:01:00+00:00</td>
      <td>2017-12-08</td>
      <td>24.016667</td>
      <td>00:01:00</td>
      <td>1</td>
      <td>2017</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="in_good_logging_day" class="doc_header"><code>in_good_logging_day</code><a href="https://github.com/FleischerResearchLab/treets/tree/master/treets/core.py#L255" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>in_good_logging_day</code>(<strong><code>data_scource</code></strong>, <strong><code>identifier</code></strong>, <strong><code>date_col</code></strong>, <strong><code>time_col</code></strong>, <strong><code>min_log_num</code></strong>=<em><code>2</code></em>, <strong><code>min_seperation</code></strong>=<em><code>4</code></em>)</p>
</blockquote>
<p>Description:</p>

<pre><code>A logging's in a good logging day if the there are more than min_log_num loggings in one day w/ more than min_seperation hoursx apart from the earliest logging and the latest logging and False otherwise.


</code></pre>
<p>Input:</p>

<pre><code>- data_scource (str, pandas df): input path, file in pickle, csv or pandas dataframe format.

- identifier (str): id-like column that's used to identify a subject.

- time_col (str): column that contains time in float format.

- min_log_num (count,int): filtration criteria on the minimum number of loggings each day.

- min_seperation(hours,int): filtration criteria on the minimum separations between the earliest and latest loggings each day.


</code></pre>
<p>Return:</p>

<pre><code>- A boolean numpy array indicating whether the corresponding row is in a good logging day. Details on the criteria is in the description.


</code></pre>
<p>Optional functions to use to have proper inputs:</p>

<pre><code>- find_date() for date_col
- find_float_time() for time_col</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">load_food_data</span><span class="p">(</span><span class="s1">&#39;data/test_food_details.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;unique_code&#39;</span><span class="p">,</span><span class="s1">&#39;original_logtime&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;in_good_logging_day&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">in_good_logging_day</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;unique_code&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;float_time&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Unnamed: 0</th>
      <th>ID</th>
      <th>unique_code</th>
      <th>research_info_id</th>
      <th>desc_text</th>
      <th>food_type</th>
      <th>original_logtime</th>
      <th>date</th>
      <th>float_time</th>
      <th>time</th>
      <th>week_from_start</th>
      <th>year</th>
      <th>in_good_logging_day</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1340147</td>
      <td>7572733</td>
      <td>alqt14018795225</td>
      <td>150</td>
      <td>Water</td>
      <td>w</td>
      <td>2017-12-08 17:30:00+00:00</td>
      <td>2017-12-08</td>
      <td>17.500000</td>
      <td>17:30:00</td>
      <td>1</td>
      <td>2017</td>
      <td>True</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1340148</td>
      <td>411111</td>
      <td>alqt14018795225</td>
      <td>150</td>
      <td>Coffee White</td>
      <td>b</td>
      <td>2017-12-09 00:01:00+00:00</td>
      <td>2017-12-08</td>
      <td>24.016667</td>
      <td>00:01:00</td>
      <td>1</td>
      <td>2017</td>
      <td>True</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="clean_loggings" class="doc_header"><code>clean_loggings</code><a href="https://github.com/FleischerResearchLab/treets/tree/master/treets/core.py#L290" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>clean_loggings</code>(<strong><code>data_scource</code></strong>, <strong><code>text_col</code></strong>, <strong><code>identifier</code></strong>)</p>
</blockquote>
<p>Description:</p>
<p>This function convert all the loggings in the data_scource file into a list of typo-corrected items based on the text_col column. This function is based on a built-in vocabulary dictionary and an n-gram searcher.</p>
<p>Input:</p>

<pre><code>- data_scource (str, pandas df): input path, file in pickle, csv or panda dataframe format.
- text_col(str): column that will be converted to individual items.
- identifier(str): participants' unique identifier such as id, name, etc.

</code></pre>
<p>Return:</p>

<pre><code>- A dataframe contains the cleaned version of the text_col.</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">clean_loggings</span><span class="p">(</span><span class="s1">&#39;data/output/public.pickle&#39;</span><span class="p">,</span> <span class="s1">&#39;desc_text&#39;</span><span class="p">,</span> <span class="s1">&#39;unique_code&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
Input <span class="ansi-green-fg">In [27]</span>, in <span class="ansi-cyan-fg">&lt;cell line: 1&gt;</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-fg">----&gt; 1</span> <span class="ansi-yellow-bg">clean_loggings</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg" style="color: rgb(175,0,0)">&#39;</span><span class="ansi-yellow-bg" style="color: rgb(175,0,0)">data/output/public.pickle</span><span class="ansi-yellow-bg" style="color: rgb(175,0,0)">&#39;</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg" style="color: rgb(175,0,0)">&#39;</span><span class="ansi-yellow-bg" style="color: rgb(175,0,0)">desc_text</span><span class="ansi-yellow-bg" style="color: rgb(175,0,0)">&#39;</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg" style="color: rgb(175,0,0)">&#39;</span><span class="ansi-yellow-bg" style="color: rgb(175,0,0)">unique_code</span><span class="ansi-yellow-bg" style="color: rgb(175,0,0)">&#39;</span><span class="ansi-yellow-bg">)</span><span style="color: rgb(98,98,98)">.</span>head(<span style="color: rgb(98,98,98)">3</span>)

Input <span class="ansi-green-fg">In [26]</span>, in <span class="ansi-cyan-fg">clean_loggings</span><span class="ansi-blue-fg">(data_scource, text_col, identifier)</span>
<span class="ansi-green-intense-fg ansi-bold">     17</span> food_all <span style="color: rgb(98,98,98)">=</span> file_loader(data_scource)
<span class="ansi-green-intense-fg ansi-bold">     18</span> <span style="color: rgb(95,135,135)"># initialize food parser instance</span>
<span class="ansi-green-fg">---&gt; 19</span> fp <span style="color: rgb(98,98,98)">=</span> <span class="ansi-yellow-bg">FoodParser</span>()
<span class="ansi-green-intense-fg ansi-bold">     20</span> fp<span style="color: rgb(98,98,98)">.</span>initialization()
<span class="ansi-green-intense-fg ansi-bold">     22</span> <span style="color: rgb(95,135,135)"># parse food</span>

<span class="ansi-red-fg">NameError</span>: name &#39;FoodParser&#39; is not defined</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_types" class="doc_header"><code>get_types</code><a href="https://github.com/FleischerResearchLab/treets/tree/master/treets/core.py#L326" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_types</code>(<strong><code>data_scource</code></strong>, <strong><code>food_type</code></strong>)</p>
</blockquote>
<p>Description:</p>
<p>This function filters with the expected food types and return a cleaner version of data_scource file.</p>
<p>Input:</p>

<pre><code>- data_scource (str, pandas df): input path, file in pickle, csv or panda dataframe format.

- food_type (str): expected types of the loggings for filtering, in format of list. Available types:  

    1. 'w' : water 

    2. 'b' : beverage 

    3. 'f' : food 

    4. 'm' : medicine 


</code></pre>
<p>Return:</p>

<pre><code>- A filtered dataframe with expected food type/types with five columns: 'unique_code','food_type', 'desc_text', 'date', 'local_time'.


</code></pre>
<p>Requirements:</p>

<pre><code>data_scource file must have the following columns:

    - food_type</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">get_types</span><span class="p">(</span><span class="s1">&#39;data/output/public_basline_usable_expanded.pickle&#39;</span><span class="p">,[</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="s1">&#39;f&#39;</span><span class="p">])[[</span><span class="s1">&#39;unique_code&#39;</span><span class="p">,</span><span class="s1">&#39;desc_text&#39;</span><span class="p">,</span><span class="s1">&#39;food_type&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">load_food_data</span><span class="p">(</span><span class="s1">&#39;data/test_food_details.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;unique_code&#39;</span><span class="p">,</span> <span class="s1">&#39;original_logtime&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">get_types</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;m&#39;</span><span class="p">])[[</span><span class="s1">&#39;unique_code&#39;</span><span class="p">,</span><span class="s1">&#39;desc_text&#39;</span><span class="p">,</span><span class="s1">&#39;food_type&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="count_caloric_entries" class="doc_header"><code>count_caloric_entries</code><a href="https://github.com/FleischerResearchLab/treets/tree/master/treets/core.py#L364" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>count_caloric_entries</code>(<strong><code>df</code></strong>)</p>
</blockquote>
<p>Description:</p>

<pre><code>This is a function that counts the number of food and beverage loggings.

</code></pre>
<p>Input:</p>

<pre><code>- df(pandas df) : food_logging data.

</code></pre>
<p>Output:</p>

<pre><code>- a float representing the number of caloric entries.

</code></pre>
<p>Requirement:</p>

<pre><code>- 'date' column existed in the df.</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">load_food_data</span><span class="p">(</span><span class="s1">&#39;data/test_food_details.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;unique_code&#39;</span><span class="p">,</span> <span class="s1">&#39;original_logtime&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">count_caloric_entries</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="mean_daily_eating_duration" class="doc_header"><code>mean_daily_eating_duration</code><a href="https://github.com/FleischerResearchLab/treets/tree/master/treets/core.py#L385" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>mean_daily_eating_duration</code>(<strong><code>df</code></strong>, <strong><code>date_col</code></strong>, <strong><code>time_col</code></strong>)</p>
</blockquote>
<p>Description:</p>

<pre><code>This is a function that calculates the mean daily eating window, which is defined as the duration of first and last caloric intake.

</code></pre>
<p>Input:</p>

<pre><code>- df(pandas df) : food_logging data.
- date_col(column existed in df, string) : column name that contains date information from the df dataframe.
- time_col(column existed in df, string) : contains the float time data for each logging.

</code></pre>
<p>Output:</p>

<pre><code>- a float representing the mean daily eating window.

</code></pre>
<p>Requirement:</p>

<pre><code>- 'date' column existed in the df.
- float time is calculated.

</code></pre>
<p>Optional functions to use to have proper inputs:</p>

<pre><code>- find_date() for date_col
- find_float_time() for time_col</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">load_food_data</span><span class="p">(</span><span class="s1">&#39;data/test_food_details.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;unique_code&#39;</span><span class="p">,</span> <span class="s1">&#39;original_logtime&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">mean_daily_eating_duration</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;float_time&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="std_daily_eating_duration" class="doc_header"><code>std_daily_eating_duration</code><a href="https://github.com/FleischerResearchLab/treets/tree/master/treets/core.py#L413" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>std_daily_eating_duration</code>(<strong><code>df</code></strong>, <strong><code>date_col</code></strong>, <strong><code>time_col</code></strong>)</p>
</blockquote>
<p>Description:</p>

<pre><code>This function calculates the standard deviation of daily eating window, which is defined as the duration between the first and last caloric intake.

</code></pre>
<p>Input:</p>

<pre><code>- df(pandas df) : food_logging data.
- date_col(column existed in df, string) : column name that contains date information from the df dataframe.
- time_col(column existed in df, string) : contains the float time data for each logging.

</code></pre>
<p>Output:</p>

<pre><code>- a float representing the standard deviation of daily eating window.

</code></pre>
<p>Requirement:</p>

<pre><code>- 'food_type' column existed in the df.

</code></pre>
<p>Optional functions to use to have proper inputs:</p>

<pre><code>- find_date() for date_col
- find_float_time() for time_col</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">load_food_data</span><span class="p">(</span><span class="s1">&#39;data/test_food_details.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;unique_code&#39;</span><span class="p">,</span> <span class="s1">&#39;original_logtime&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">std_daily_eating_duration</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;float_time&#39;</span> <span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="earliest_entry" class="doc_header"><code>earliest_entry</code><a href="https://github.com/FleischerResearchLab/treets/tree/master/treets/core.py#L441" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>earliest_entry</code>(<strong><code>df</code></strong>, <strong><code>date_col</code></strong>, <strong><code>time_col</code></strong>)</p>
</blockquote>
<p>Description:</p>

<pre><code>This function calculates the earliest first calorie on any day in the study period.
</code></pre>
<p>Input:</p>

<pre><code>- df(pandas df) : food_logging data.
- date_col(column existed in df, string) : column name that contains date information from the df dataframe.
- time_col(column existed in df, string) : contains information of logging time in float.

</code></pre>
<p>Output:</p>

<pre><code>- the earliest caloric time in float on any day in the study period.

</code></pre>
<p>Requirement:</p>

<pre><code>- 'date' column existed in the df.

</code></pre>
<p>Optional functions to use to have proper inputs:</p>

<pre><code>- find_date() for date_col
- find_float_time() for time_col</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">load_food_data</span><span class="p">(</span><span class="s1">&#39;data/test_food_details.csv&#39;</span><span class="p">,</span><span class="s1">&#39;unique_code&#39;</span><span class="p">,</span> <span class="s1">&#39;original_logtime&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">earliest_entry</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;float_time&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="mean_first_cal" class="doc_header"><code>mean_first_cal</code><a href="https://github.com/FleischerResearchLab/treets/tree/master/treets/core.py#L466" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>mean_first_cal</code>(<strong><code>df</code></strong>, <strong><code>date_col</code></strong>, <strong><code>time_col</code></strong>)</p>
</blockquote>
<p>Description:</p>

<pre><code>This function calculates the average time of first calory intake.
</code></pre>
<p>Input:</p>

<pre><code>- df(pandas df) : food_logging data.
- date_col(column existed in df, string) : column name that contains date information from the df dataframe.
- time_col(column existed in df, string) : contains information of logging time in float.

</code></pre>
<p>Output:</p>

<pre><code>- the mean first caloric intake time in float in the study period.

</code></pre>
<p>Requirement:</p>

<pre><code>- 'date' column existed in the df.

</code></pre>
<p>Optional functions to use to have proper inputs:</p>

<pre><code>- find_date() for date_col
- find_float_time() for time_col</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">load_food_data</span><span class="p">(</span><span class="s1">&#39;data/test_food_details.csv&#39;</span><span class="p">,</span><span class="s1">&#39;unique_code&#39;</span><span class="p">,</span> <span class="s1">&#39;original_logtime&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">mean_first_cal</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;float_time&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;unique_code&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">mean_first_cal</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;float_time&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">0</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="std_first_cal" class="doc_header"><code>std_first_cal</code><a href="https://github.com/FleischerResearchLab/treets/tree/master/treets/core.py#L490" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>std_first_cal</code>(<strong><code>df</code></strong>, <strong><code>date_col</code></strong>, <strong><code>time_col</code></strong>)</p>
</blockquote>
<p>Description:</p>

<pre><code>This function calculates the average time of first calory intake.
</code></pre>
<p>Input:</p>

<pre><code>- df(pandas df) : food_logging data.
- date_col(column existed in df, string) : column name that contains date information from the df dataframe.
- time_col(column existed in df, string) : contains information of logging time in float.

</code></pre>
<p>Output:</p>

<pre><code>- the mean first caloric intake time in float in the study period.

</code></pre>
<p>Requirement:</p>

<pre><code>- 'date' column existed in the df.

</code></pre>
<p>Optional functions to use to have proper inputs:</p>

<pre><code>- find_date() for date_col
- find_float_time() for time_col</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">load_food_data</span><span class="p">(</span><span class="s1">&#39;data/test_food_details.csv&#39;</span><span class="p">,</span><span class="s1">&#39;unique_code&#39;</span><span class="p">,</span> <span class="s1">&#39;original_logtime&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">std_first_cal</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;float_time&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="mean_last_cal" class="doc_header"><code>mean_last_cal</code><a href="https://github.com/FleischerResearchLab/treets/tree/master/treets/core.py#L514" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>mean_last_cal</code>(<strong><code>df</code></strong>, <strong><code>date_col</code></strong>, <strong><code>time_col</code></strong>)</p>
</blockquote>
<p>Description:</p>

<pre><code>This function calculates the average time of last calory intake.
</code></pre>
<p>Input:</p>

<pre><code>- df(pandas df) : food_logging data.
- date_col(column existed in df, string) : column name that contains date information from the df dataframe.
- time_col(column existed in df, string) : contains information of logging time in float.

</code></pre>
<p>Output:</p>

<pre><code>- the mean last caloric intake time in float in the study period.

</code></pre>
<p>Requirement:</p>

<pre><code>- 'date' column existed in the df.

</code></pre>
<p>Optional functions to use to have proper inputs:</p>

<pre><code>- find_date() for date_col
- find_float_time() for time_col</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">load_food_data</span><span class="p">(</span><span class="s1">&#39;data/test_food_details.csv&#39;</span><span class="p">,</span><span class="s1">&#39;unique_code&#39;</span><span class="p">,</span> <span class="s1">&#39;original_logtime&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">mean_last_cal</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;float_time&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="std_last_cal" class="doc_header"><code>std_last_cal</code><a href="https://github.com/FleischerResearchLab/treets/tree/master/treets/core.py#L538" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>std_last_cal</code>(<strong><code>df</code></strong>, <strong><code>date_col</code></strong>, <strong><code>time_col</code></strong>)</p>
</blockquote>
<p>Description:</p>

<pre><code>This function calculates the average time of last calory intake.
</code></pre>
<p>Input:</p>

<pre><code>- df(pandas df) : food_logging data.
- date_col(column existed in df, string) : column name that contains date information from the df dataframe.
- time_col(column existed in df, string) : contains information of logging time in float.

</code></pre>
<p>Output:</p>

<pre><code>- the mean last caloric intake time in float in the study period.

</code></pre>
<p>Requirement:</p>

<pre><code>- 'date' column existed in the df.

</code></pre>
<p>Optional functions to use to have proper inputs:</p>

<pre><code>- find_date() for date_col
- find_float_time() for time_col</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">load_food_data</span><span class="p">(</span><span class="s1">&#39;data/test_food_details.csv&#39;</span><span class="p">,</span><span class="s1">&#39;unique_code&#39;</span><span class="p">,</span> <span class="s1">&#39;original_logtime&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">std_last_cal</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;float_time&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="logging_day_counts" class="doc_header"><code>logging_day_counts</code><a href="https://github.com/FleischerResearchLab/treets/tree/master/treets/core.py#L562" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>logging_day_counts</code>(<strong><code>df</code></strong>)</p>
</blockquote>
<p>Description:</p>

<pre><code>This function calculates the number of days that contains any loggings.
</code></pre>
<p>Input:</p>

<pre><code>- df(pandas df) : food_logging data.

</code></pre>
<p>Output:</p>

<pre><code>- an integer that represents the number of logging days.

</code></pre>
<p>Requirement:</p>

<pre><code>- 'date' column existed in the df.</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">load_food_data</span><span class="p">(</span><span class="s1">&#39;data/test_food_details.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;unique_code&#39;</span><span class="p">,</span> <span class="s1">&#39;original_logtime&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">logging_day_counts</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="find_missing_logging_days" class="doc_header"><code>find_missing_logging_days</code><a href="https://github.com/FleischerResearchLab/treets/tree/master/treets/core.py#L579" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>find_missing_logging_days</code>(<strong><code>df</code></strong>, <strong><code>start_date</code></strong>=<em><code>'not_defined'</code></em>, <strong><code>end_date</code></strong>=<em><code>'not_defined'</code></em>)</p>
</blockquote>
<p>Description:</p>

<pre><code>This function finds the days during which there's no logging within the period from start_date to end_date.
</code></pre>
<p>Input:</p>

<pre><code>- df(panda df): food_logging data.
- start_date(datetime.date object): start date of the period of calculation. If not defined, it will be automatically set to be the earliest date in df.
- end_date(datetime.date object): end date of the period of calculation. If not defined, it will be automatically set to be the latest date in df.

</code></pre>
<p>Output:</p>

<pre><code>- a list that contains all of the dates that don't contain loggings.

</code></pre>
<p>Requirement:</p>

<pre><code>- 'date' column existed in the df.</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">load_food_data</span><span class="p">(</span><span class="s1">&#39;data/test_food_details.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;unique_code&#39;</span><span class="p">,</span> <span class="s1">&#39;original_logtime&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">find_missing_logging_days</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2017</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2017</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="good_lwa_day_counts" class="doc_header"><code>good_lwa_day_counts</code><a href="https://github.com/FleischerResearchLab/treets/tree/master/treets/core.py#L615" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>good_lwa_day_counts</code>(<strong><code>df</code></strong>, <strong><code>window_start</code></strong>, <strong><code>window_end</code></strong>, <strong><code>time_col</code></strong>, <strong><code>min_log_num</code></strong>=<em><code>2</code></em>, <strong><code>min_seperation</code></strong>=<em><code>5</code></em>, <strong><code>buffer_time</code></strong>=<em><code>'15 minutes'</code></em>, <strong><code>h</code></strong>=<em><code>4</code></em>, <strong><code>start_date</code></strong>=<em><code>'not_defined'</code></em>, <strong><code>end_date</code></strong>=<em><code>'not_defined'</code></em>)</p>
</blockquote>
<p>Description:</p>

<pre><code>This function calculates the number of good logging days, good window days, outside window days and adherent days. Good logging day is defined as a day that the person makes at least min_log_num number of loggings and the time separation between the earliest and the latest logging are greater than min_seperation.

A good window day is defined as a date that all the food loggings are within the assigned restricted window. An adherent day is defined as a date that is both a good logging day and a good window day.
</code></pre>
<p>Input:</p>

<pre><code>- df(pandas df): food_logging data.
- window_start(datetime.time object): start time of the restriction window.
- window_end(datetime.time object): end time of the restriction window.
- time_col(str) : the column that represents the eating time.
- min_log_num(count, int): minimum number of loggings to qualify a day as a good logging day
- min_seperation(hours, int): minimum period of separation between earliest and latest loggings to qualify a day as a good logging day
- buffer_time(time in string that can be passed into pd.Timedelta()): wiggle room for to be added/subtracted on the ends of windows.
- h(hours, int): hours to be pushed back
- start_date(datetime.date object): start date of the period for calculation. If not defined, it will be automatically set to be the earliest date in df.
- end_date(datetime.date object): end date of the period for calculation. If not defined, it will be automatically set to be the latest date in df.
</code></pre>
<p>Output:</p>

<pre><code>- Two lists.
    - First list contains 4 integers that represent the number of good logging days, good window days, outside window days and adherent_days
    - Second list contains lists consisted of specific dates that are not good logging days, window days and adherent days within the range of start date and end date(both inclusive).
</code></pre>
<p>Requirement:</p>

<pre><code>- 'date' column existed in the df.
- float time is calculated as time_col.</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">load_food_data</span><span class="p">(</span><span class="s1">&#39;data/test_food_details.csv&#39;</span><span class="p">,</span><span class="s1">&#39;unique_code&#39;</span><span class="p">,</span> <span class="s1">&#39;original_logtime&#39;</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="n">dates</span><span class="p">,</span> <span class="n">bad_dates</span> <span class="o">=</span> <span class="n">good_lwa_day_counts</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">time</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="n">datetime</span><span class="o">.</span><span class="n">time</span><span class="p">(</span><span class="mi">23</span><span class="p">,</span><span class="mi">59</span><span class="p">,</span><span class="mi">59</span><span class="p">),</span> <span class="s1">&#39;float_time&#39;</span><span class="p">)</span>
<span class="n">dates</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">bad_dates</span><span class="p">[</span><span class="mi">0</span><span class="p">][:</span><span class="mi">5</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="experiment-design">experiment design<a class="anchor-link" href="#experiment-design"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="filtering_usable_data" class="doc_header"><code>filtering_usable_data</code><a href="https://github.com/FleischerResearchLab/treets/tree/master/treets/core.py#L710" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>filtering_usable_data</code>(<strong><code>df</code></strong>, <strong><code>identifier</code></strong>, <strong><code>date_col</code></strong>, <strong><code>num_items</code></strong>, <strong><code>num_days</code></strong>)</p>
</blockquote>
<p>Description:</p>

<pre><code>This function filters the cleaned app data so the users who satisfies the criteria are left. The criteria is that the person is left if the total loggings for that person are more than num_items and at the same time, the total days of loggings are more than num_days.

</code></pre>
<p>Input:</p>

<pre><code>- df (pd.DataFrame): the dataframe to be filtered
- identifier (str): unique_id or ID, or name that identifies people.
- date_col (str): column name that contains date information from the df dataframe.
- num_items (int):   number of items to be used as cut-off
- num_days (int):    number of days to be used as cut-off
</code></pre>
<p>Output:</p>

<pre><code>- df_usable:  a panda DataFrame with filtered rows
- set_usable: a set of unique_code to be included as "usable"
</code></pre>
<p>Requirements:</p>

<pre><code>df should have the following columns:
    - desc_text
</code></pre>
<p>Optional functions to use to have proper inputs:</p>

<pre><code>- find_date() for date_col</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">file_loader</span><span class="p">(</span><span class="s1">&#39;data/output/public.pickle&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">filtering_usable_data</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="s1">&#39;unique_code&#39;</span><span class="p">,</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">14</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="prepare_baseline_and_intervention_usable_data" class="doc_header"><code>prepare_baseline_and_intervention_usable_data</code><a href="https://github.com/FleischerResearchLab/treets/tree/master/treets/core.py#L752" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>prepare_baseline_and_intervention_usable_data</code>(<strong><code>data_scource</code></strong>, <strong><code>identifier</code></strong>, <strong><code>date_col</code></strong>, <strong><code>baseline_num_items</code></strong>, <strong><code>baseline_num_days</code></strong>, <strong><code>intervention_num_items</code></strong>, <strong><code>intervention_num_days</code></strong>)</p>
</blockquote>
<p>Description:</p>

<pre><code>Filter and create baseline_expanded and intervention groups based on data_scource pickle file. Expanded baseline dataset contains the first two weeks data and 13, 14 weeks data that pass the given criteria. Intervention dataset contains 13, 14 weeks data that pass the given criteria.


</code></pre>
<p>Input:</p>

<pre><code>- data_scource (str, pandas df): input path, file in pickle, csv or pandas dataframe format

- identifier (str): unique_id or ID, or name that identifies people.
- date_col (str): column name that contains date information from the df dataframe.
- baseline_num_items (int): number of items to be used as cut-off for baseline group. 

- baseline_num_days (int): number of days to be used as cut-off for baseline group. 

- intervention_num_items (int): number of items to be used as cut-off for intervention group.

- intervention_num_days (int): number of days to be used as cut-off for intervention group. 


</code></pre>
<p>Return:</p>

<pre><code>- a list in which index 0 is the baseline expanded dataframe and 1 is the intervention dataframe.


</code></pre>
<p>Requirements:</p>

<pre><code>data_scource file must have the following columns:

    - week_from_start

    - desc_text</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">=</span> <span class="n">prepare_baseline_and_intervention_usable_data</span><span class="p">(</span><span class="s1">&#39;data/output/public.pickle&#39;</span><span class="p">,</span><span class="s1">&#39;unique_code&#39;</span><span class="p">,</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">12</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="data-analysis/summary">data analysis/summary<a class="anchor-link" href="#data-analysis/summary"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="users_sorted_by_logging" class="doc_header"><code>users_sorted_by_logging</code><a href="https://github.com/FleischerResearchLab/treets/tree/master/treets/core.py#L796" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>users_sorted_by_logging</code>(<strong><code>data_scource</code></strong>, <strong><code>food_type</code></strong>=<em><code>['f', 'b', 'm', 'w']</code></em>)</p>
</blockquote>
<p>Description:</p>

<pre><code>This function returns a dataframe reports the number of good logging days for each user in the data_scource file. The default order is descending.


</code></pre>
<p>Input:</p>

<pre><code>- data_scource (str, pandas df): input path, file in pickle, csv or pandas dataframe format.

- food_type (str): food types to filter in a list format. Default: ["f", "b", "m", "w"]. Available food types:

    1. 'w' : water 

    2. 'b' : beverage 

    3. 'f' : food 

    4. 'm' : medicine 


</code></pre>
<p>Return:</p>

<pre><code>- A dataframe contains the number of good logging days for each user.


</code></pre>
<p>Requirements:</p>

<pre><code>data_scource file must have the following columns:

    - food_type

    - unique_code

    - date</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">users_sorted_by_activity</span><span class="p">(</span><span class="s1">&#39;data/output/public.pickle&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;f&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="eating_intervals_percentile" class="doc_header"><code>eating_intervals_percentile</code><a href="https://github.com/FleischerResearchLab/treets/tree/master/treets/core.py#L836" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>eating_intervals_percentile</code>(<strong><code>data_scource</code></strong>, <strong><code>time_col</code></strong>, <strong><code>identifier</code></strong>)</p>
</blockquote>
<p>Description:
   This function calculates the .025, .05, .10, .125, .25, .5, .75, .875, .9, .95, .975 quantile of eating time and mid 95%, mid 90%, mid 80%, mid 75% and mid 50% duration for each user.</p>
<p>Input:</p>

<pre><code>- data_scource (str, pandas df): input path, file in pickle, csv or panda dataframe format.
- time_col(str) : the column that represents the eating time.
- identitfier(str) : participants' unique identifier such as id, name, etc.

</code></pre>
<p>Return:</p>

<pre><code>- A summary table with count, mean, std, min, quantiles and mid durations for all subjects from the data_scource file.

</code></pre>
<p>Optional functions to use to have proper inputs:</p>

<pre><code>- find_float_time() for time_col</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">load_food_data</span><span class="p">(</span><span class="s1">&#39;data/test_food_details.csv&#39;</span><span class="p">,</span><span class="s1">&#39;unique_code&#39;</span><span class="p">,</span> <span class="s1">&#39;original_logtime&#39;</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="n">eating_intervals_percentile</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;float_time&#39;</span><span class="p">,</span> <span class="s1">&#39;unique_code&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="first_cal_analysis_summary" class="doc_header"><code>first_cal_analysis_summary</code><a href="https://github.com/FleischerResearchLab/treets/tree/master/treets/core.py#L870" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>first_cal_analysis_summary</code>(<strong><code>data_scource</code></strong>, <strong><code>identifier</code></strong>, <strong><code>date_col</code></strong>, <strong><code>time_col</code></strong>, <strong><code>min_log_num</code></strong>=<em><code>2</code></em>, <strong><code>min_separation</code></strong>=<em><code>4</code></em>)</p>
</blockquote>
<p>Description:</p>
<p>This function takes the loggings in good logging days and calculate the 5%,10%,25%,50%,75%,90%,95% quantile of first_cal time for each user.</p>
<p>Input:</p>

<pre><code>- data_scource (str, pandas df): input path, file in pickle, csv or panda dataframe format.
- identitfier(str) : participants' unique identifier such as id, name, etc.
- date_col(str) : the column that represents the dates.
- time_col(str) : the column that represents the float time.
- min_log_num (count,int): filtration criteria on the minimum number of loggings each day.
- min_seperation(hours,int): filtration criteria on the minimum separations between the earliest and latest loggings each day.


</code></pre>
<p>Return:</p>

<pre><code>- A summary table with 5%,10%,25%,50%,75%,90%,95% quantile of first_cal time for all subjects from the data_scource file.


</code></pre>
<p>Optional functions to use to have proper inputs:</p>

<pre><code>- find_date() for date_col
- find_float_time() for time_col</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">first_cal_analysis_summary</span><span class="p">(</span><span class="s1">&#39;data/output/public_basline_usable_expanded.pickle&#39;</span><span class="p">,</span> <span class="s1">&#39;unique_code&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;local_time&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="last_cal_analysis_summary" class="doc_header"><code>last_cal_analysis_summary</code><a href="https://github.com/FleischerResearchLab/treets/tree/master/treets/core.py#L912" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>last_cal_analysis_summary</code>(<strong><code>data_scource</code></strong>, <strong><code>identifier</code></strong>, <strong><code>date_col</code></strong>, <strong><code>time_col</code></strong>, <strong><code>min_log_num</code></strong>=<em><code>2</code></em>, <strong><code>min_separation</code></strong>=<em><code>4</code></em>)</p>
</blockquote>
<p>Description:</p>
<p>This function takes the loggings in good logging days and calculate the 5%,10%,25%,50%,75%,90%,95% quantile of last_cal time for each user.</p>
<p>Input:</p>

<pre><code>- data_scource (str, pandas df): input path, file in pickle, csv or panda dataframe format.
- identitfier(str) : participants' unique identifier such as id, name, etc.
- date_col(str) : the column that represents the dates.
- time_col(str) : the column that represents the float time.
- min_log_num (count,int): filtration criteria on the minimum number of loggings each day.
- min_seperation(hours,int): filtration criteria on the minimum separations between the earliest and latest loggings each day.

</code></pre>
<p>Return:</p>

<pre><code>- A summary table with 5%,10%,25%,50%,75%,90%,95% quantile of last_cal time for all subjects from the data_scource file.


</code></pre>
<p>Optional functions to use to have proper inputs:</p>

<pre><code>- find_date() for date_col
- find_float_time() for time_col</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">last_cal_analysis_summary</span><span class="p">(</span><span class="s1">&#39;data/output/public_basline_usable_expanded.pickle&#39;</span><span class="p">,</span><span class="s1">&#39;unique_code&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;local_time&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="summarize_data" class="doc_header"><code>summarize_data</code><a href="https://github.com/FleischerResearchLab/treets/tree/master/treets/core.py#L959" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>summarize_data</code>(<strong><code>data_scource</code></strong>, <strong><code>identifier</code></strong>, <strong><code>float_time_col</code></strong>, <strong><code>date_col</code></strong>, <strong><code>min_log_num</code></strong>=<em><code>2</code></em>, <strong><code>min_seperation</code></strong>=<em><code>4</code></em>)</p>
</blockquote>
<p>Description:</p>
<p>This function calculates num_days, num_total_items, num_f_n_b, num_medications, num_water, duration_mid_95, start_95, end_95, first_cal_avg, first_cal_std, last_cal_avg, last_cal_std, eating_win_avg, eating_win_std, adherent_count, first_cal variation (90%-10%), last_cal variation (90%-10%).</p>
<p>Input:</p>

<pre><code>- data_scource (str, pandas df): input path, file in pickle, csv or panda dataframe format.
- float_time_col(str) : the column that represents the eating time.
- identitfier(str) : participants' unique identifier such as id, name, etc.
- date_col(str) : the column that represents the dates.
- min_log_num (count,int): filtration criteria on the minimum number of loggings each day.
- min_seperation(hours,int): filtration criteria on the minimum separations between the earliest and latest loggings each day.


</code></pre>
<p>Return:</p>

<pre><code>- A summary table with count, mean, std, min, quantiles and mid durations for all subjects from the data_scource file.


</code></pre>
<p>Requirements:</p>

<pre><code>data_scource file must have the following columns:

    - food_type


</code></pre>
<p>Optional functions to use to have proper inputs:</p>

<pre><code>- find_date() for date_col
- find_float_time() for time_col</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">load_food_data</span><span class="p">(</span><span class="s1">&#39;data/test_food_details.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;unique_code&#39;</span><span class="p">,</span> <span class="s1">&#39;original_logtime&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">summarize_data</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="s1">&#39;unique_code&#39;</span><span class="p">,</span> <span class="s1">&#39;float_time&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="summarize_data_with_experiment_phases" class="doc_header"><code>summarize_data_with_experiment_phases</code><a href="https://github.com/FleischerResearchLab/treets/tree/master/treets/core.py#L1056" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>summarize_data_with_experiment_phases</code>(<strong><code>food_data</code></strong>, <strong><code>ref_tbl</code></strong>, <strong><code>min_log_num</code></strong>=<em><code>2</code></em>, <strong><code>min_seperation</code></strong>=<em><code>5</code></em>, <strong><code>buffer_time</code></strong>=<em><code>'15 minutes'</code></em>, <strong><code>h</code></strong>=<em><code>4</code></em>, <strong><code>report_level</code></strong>=<em><code>2</code></em>, <strong><code>txt</code></strong>=<em><code>False</code></em>)</p>
</blockquote>
<p>Description:</p>

<pre><code>This is a comprehensive function that performs all of the functionalities needed.

</code></pre>
<p>Input:</p>

<pre><code>- food_data(panda df): food_logging data.
- ref_tbl(panda df): table that contains window information and study phase information for each participant.
- min_log_num(counts): minimum number of loggings to qualify a day as a good logging day.
- min_seperation(hours): minimum period of separation between earliest and latest loggings to qualify a day as a good logging day
- buffer_time(time in string that can be passed into pd.Timedelta()): wiggle room for to be added/subtracted on the ends of windows.
- h(hours): hours to be pushed back.
- report_level(int): whether to print out the dates of no logging days, bad logging days, bad window days and non-adherent days for each participant. 0 - no report. 1 - report no logging days. 2 - report no logging days, bad logging days, bad window days and non adherent days.
- txt(boolean): if True, a txt format report will be saved in the current directory named "treets_warning_dates.txt".


</code></pre>
<p>Output:</p>

<pre><code>- df : dataframe that has all the variables needed and has the same row number as the ref_tbl.

</code></pre>
<p>Requirement:</p>

<pre><code>- food logging data is already read from all files in the directories into a dataframe, which will be passed in as the variable food_data.
- Columns 'Start_Day', 'End_day', 'mCC_ID', 'Eating_Window_Start', 'Eating_Window_End' existed in the ref_tbl.

</code></pre>
<p>Sidenote:</p>

<pre><code>- For eating window without restriction(HABIT or TRE not in intervention period), Eating_Window_Start is 0:00, Eating_Window_End is 23:59.</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">summarize_data_with_experiment_phases</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;data/col_test_data/toy_data_2000.csv&#39;</span><span class="p">)</span>\
                      <span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s1">&#39;data/col_test_data/toy_data_17May2021.xlsx&#39;</span><span class="p">),</span> <span class="n">report_level</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">T</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="plots">plots<a class="anchor-link" href="#plots"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="first_cal_mean_with_error_bar" class="doc_header"><code>first_cal_mean_with_error_bar</code><a href="https://github.com/FleischerResearchLab/treets/tree/master/treets/core.py#L1261" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>first_cal_mean_with_error_bar</code>(<strong><code>data_scource</code></strong>, <strong><code>identifier</code></strong>, <strong><code>date_col</code></strong>, <strong><code>time_col</code></strong>, <strong><code>min_log_num</code></strong>=<em><code>2</code></em>, <strong><code>min_separation</code></strong>=<em><code>4</code></em>)</p>
</blockquote>
<p>Description:</p>
<p>This function takes the loggings in good logging days, calculates the means and standard deviations of first_cal time for each participant and represent the calculated data with a scatter plot where the x axis is participants and the y axis is hours in a day.</p>
<p>Input:</p>

<pre><code>- data_scource (str, pandas df): input path, file in pickle, csv or panda dataframe format.
- identitfier(str) : participants' unique identifier such as id, name, etc.
- date_col(str) : the column that represents the dates.
- time_col(str) : the column that represents the float time.
- min_log_num (count,int): filtration criteria on the minimum number of loggings each day.
- min_seperation(hours,int): filtration criteria on the minimum separations between the earliest and latest loggings each day.

</code></pre>
<p>Return:</p>

<pre><code>- None.


</code></pre>
<p>Optional functions to use to have proper inputs:</p>

<pre><code>- find_date() for date_col
- find_float_time() for time_col</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">first_cal_mean_with_error_bar</span><span class="p">(</span><span class="s1">&#39;data/output/public_basline_usable_expanded.pickle&#39;</span><span class="p">,</span><span class="s1">&#39;unique_code&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;local_time&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="last_cal_mean_with_error_bar" class="doc_header"><code>last_cal_mean_with_error_bar</code><a href="https://github.com/FleischerResearchLab/treets/tree/master/treets/core.py#L1308" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>last_cal_mean_with_error_bar</code>(<strong><code>data_scource</code></strong>, <strong><code>identifier</code></strong>, <strong><code>date_col</code></strong>, <strong><code>time_col</code></strong>, <strong><code>min_log_num</code></strong>=<em><code>2</code></em>, <strong><code>min_separation</code></strong>=<em><code>4</code></em>)</p>
</blockquote>
<p>Description:</p>
<p>This function takes the loggings in good logging days, calculates the means and standard deviations of last_cal time for each participant and represent the calculated data with a scatter plot where the x axis is participants and the y axis is hours in a day.</p>
<p>Input:</p>

<pre><code>- data_scource (str, pandas df): input path, file in pickle, csv or panda dataframe format.
- identitfier(str) : participants' unique identifier such as id, name, etc.
- date_col(str) : the column that represents the dates.
- time_col(str) : the column that represents the float time.
- min_log_num (count,int): filtration criteria on the minimum number of loggings each day.
- min_seperation(hours,int): filtration criteria on the minimum separations between the earliest and latest loggings each day.

</code></pre>
<p>Return:</p>

<pre><code>- None.


</code></pre>
<p>Optional functions to use to have proper inputs:</p>

<pre><code>- find_date() for date_col
- find_float_time() for time_col</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">last_cal_mean_with_error_bar</span><span class="p">(</span><span class="s1">&#39;data/output/public_basline_usable_expanded.pickle&#39;</span><span class="p">,</span><span class="s1">&#39;unique_code&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;local_time&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="first_cal_analysis_variability_plot" class="doc_header"><code>first_cal_analysis_variability_plot</code><a href="https://github.com/FleischerResearchLab/treets/tree/master/treets/core.py#L1355" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>first_cal_analysis_variability_plot</code>(<strong><code>data_scource</code></strong>, <strong><code>identifier</code></strong>, <strong><code>date_col</code></strong>, <strong><code>time_col</code></strong>, <strong><code>min_log_num</code></strong>=<em><code>2</code></em>, <strong><code>min_separation</code></strong>=<em><code>4</code></em>)</p>
</blockquote>
<p>Description:</p>
<p>This function calculates the variability of loggings in good logging day by subtracting 5%,10%,25%,50%,75%,90%,95% quantile of first_cal time from the 50% first_cal time. It can also make a histogram that represents the 90%-10% interval for all subjects.</p>
<p>Input:</p>

<pre><code>- data_scource (str, pandas df): input path, file in pickle, csv or panda dataframe format.
- identitfier(str) : participants' unique identifier such as id, name, etc.
- date_col(str) : the column that represents the dates.
- time_col(str) : the column that represents the float time.
- min_log_num (count,int): filtration criteria on the minimum number of loggings each day.
- min_seperation(hours,int): filtration criteria on the minimum separations between the earliest and latest loggings each day.
- plot(bool) : Whether generating a histogram for first_cal variability. Default = True.

</code></pre>
<p>Return:</p>

<pre><code>- A dataframe that contains 5%,10%,25%,50%,75%,90%,95% quantile of first_cal time minus 50% time for each subjects from the data_scource file.


</code></pre>
<p>Optional functions to use to have proper inputs:</p>

<pre><code>- find_date() for date_col
- find_float_time() for time_col</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">first_cal_analysis_variability_plot</span><span class="p">(</span><span class="s1">&#39;data/output/public_basline_usable_expanded.pickle&#39;</span><span class="p">,</span><span class="s1">&#39;unique_code&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;local_time&#39;</span><span class="p">)</span> 
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="last_cal_analysis_variability_plot" class="doc_header"><code>last_cal_analysis_variability_plot</code><a href="https://github.com/FleischerResearchLab/treets/tree/master/treets/core.py#L1408" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>last_cal_analysis_variability_plot</code>(<strong><code>data_scource</code></strong>, <strong><code>identifier</code></strong>, <strong><code>date_col</code></strong>, <strong><code>time_col</code></strong>, <strong><code>min_log_num</code></strong>=<em><code>2</code></em>, <strong><code>min_separation</code></strong>=<em><code>4</code></em>)</p>
</blockquote>
<p>Description:</p>
<p>This function calculates the variability of loggings in good logging day by subtracting 5%,10%,25%,50%,75%,90%,95% quantile of last_cal time from the 50% last_cal time and makes a histogram that represents the 90%-10% interval for all subjects.</p>
<p>Input:</p>

<pre><code>- data_scource (str, pandas df): input path, file in pickle, csv or panda dataframe format.
- identitfier(str) : participants' unique identifier such as id, name, etc.
- date_col(str) : the column that represents the dates.
- time_col(str) : the column that represents the float time.
- min_log_num (count,int): filtration criteria on the minimum number of loggings each day.
- min_seperation(hours,int): filtration criteria on the minimum separations between the earliest and latest loggings each day.
- plot(bool) : Whether generating a histogram for first_cal variability. Default = True.
</code></pre>
<p>Return:</p>

<pre><code>- None


</code></pre>
<p>Optional functions to use to have proper inputs:</p>

<pre><code>- find_date() for date_col
- find_float_time() for time_col</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">last_cal_analysis_variability_plot</span><span class="p">(</span><span class="s1">&#39;data/output/public_basline_usable_expanded.pickle&#39;</span><span class="p">,</span><span class="s1">&#39;unique_code&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;local_time&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="first_cal_avg_histplot" class="doc_header"><code>first_cal_avg_histplot</code><a href="https://github.com/FleischerResearchLab/treets/tree/master/treets/core.py#L1459" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>first_cal_avg_histplot</code>(<strong><code>data_scource</code></strong>, <strong><code>identifier</code></strong>, <strong><code>date_col</code></strong>, <strong><code>time_col</code></strong>)</p>
</blockquote>
<p>Description:</p>
<p>This function take the first caloric event (no water or med) and calculate average event's time for “each participant”.</p>
<p>Input:</p>

<pre><code>- data_scource (str, pandas df): input path, file in pickle, csv or panda dataframe format.
- identitfier(str) : participants' unique identifier such as id, name, etc.
- date_col(str) : the column that represents the dates.
- time_col(str) : the column that represents the float time.

</code></pre>
<p>Return:</p>

<pre><code>- None

</code></pre>
<p>Requirements:</p>

<pre><code>data_scource file must have the following columns:

    - food_type

</code></pre>
<p>Optional functions to use to have proper inputs:</p>

<pre><code>- find_date() for date_col
- find_float_time() for time_col</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">first_cal_avg_histplot</span><span class="p">(</span><span class="s1">&#39;data/output/public_basline_usable_expanded.pickle&#39;</span><span class="p">,</span><span class="s1">&#39;unique_code&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;local_time&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="first_cal_sample_distplot" class="doc_header"><code>first_cal_sample_distplot</code><a href="https://github.com/FleischerResearchLab/treets/tree/master/treets/core.py#L1489" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>first_cal_sample_distplot</code>(<strong><code>data_scource</code></strong>, <strong><code>n</code></strong>, <strong><code>identifier</code></strong>, <strong><code>date_col</code></strong>, <strong><code>time_col</code></strong>)</p>
</blockquote>
<p>Description:</p>
<p>This function plots the distplot for the first_cal time from n participants that will be randomly selected with replacement.</p>
<p>Input:</p>

<pre><code>- data_scource (str, pandas df): input path, file in pickle, csv or panda dataframe format.

- n (int): the number of distplot in the output figure
- identitfier(str) : participants' unique identifier such as id, name, etc.
- date_col(str) : the column that represents the dates.
- time_col(str) : the column that represents the float time.

</code></pre>
<p>Return:</p>

<pre><code>- None

</code></pre>
<p>Requirements:</p>

<pre><code>data_scource file must have the following columns:

    - food_type


</code></pre>
<p>Optional functions to use to have proper inputs:</p>

<pre><code>- find_date() for date_col
- find_float_time() for time_col</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">first_cal_sample_distplot</span><span class="p">(</span><span class="s1">&#39;data/output/public_intervention_usable.pickle&#39;</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;unique_code&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;local_time&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="last_cal_avg_histplot" class="doc_header"><code>last_cal_avg_histplot</code><a href="https://github.com/FleischerResearchLab/treets/tree/master/treets/core.py#L1524" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>last_cal_avg_histplot</code>(<strong><code>data_scource</code></strong>, <strong><code>identifier</code></strong>, <strong><code>date_col</code></strong>, <strong><code>time_col</code></strong>)</p>
</blockquote>
<p>Description:</p>
<p>This function take the last caloric event (no water or med) and calculate average event's time for “each participant”.</p>
<p>Input:</p>

<pre><code>- data_scource (str, pandas df): input path, file in pickle, csv or panda dataframe format.
- identitfier(str) : participants' unique identifier such as id, name, etc.
- date_col(str) : the column that represents the dates.
- time_col(str) : the column that represents the float time.

</code></pre>
<p>Return:</p>

<pre><code>- None

</code></pre>
<p>Requirements:</p>

<pre><code>    - food_type


</code></pre>
<p>Optional functions to use to have proper inputs:</p>

<pre><code>- find_date() for date_col
- find_float_time() for time_col</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">last_cal_avg_histplot</span><span class="p">(</span><span class="s1">&#39;data/output/public_basline_usable_expanded.pickle&#39;</span><span class="p">,</span><span class="s1">&#39;unique_code&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;local_time&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="last_cal_sample_distplot" class="doc_header"><code>last_cal_sample_distplot</code><a href="https://github.com/FleischerResearchLab/treets/tree/master/treets/core.py#L1554" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>last_cal_sample_distplot</code>(<strong><code>data_scource</code></strong>, <strong><code>n</code></strong>, <strong><code>identifier</code></strong>, <strong><code>date_col</code></strong>, <strong><code>time_col</code></strong>)</p>
</blockquote>
<p>Description:</p>
<p>This function plots the distplot for the last_cal time from n participants that will be randomly selected with replacement.</p>
<p>Input:</p>

<pre><code>- data_scource (str, pandas df): input path, file in pickle, csv or panda dataframe format.
- n (int): the number of participants that will be randomly selected in the output figure
- identitfier(str) : participants' unique identifier such as id, name, etc.
- date_col(str) : the column that represents the dates.
- time_col(str) : the column that represents the float time.

</code></pre>
<p>Return:</p>

<pre><code>- None

</code></pre>
<p>Requirements:</p>

<pre><code>- food_type

</code></pre>
<p>Optional functions to use to have proper inputs:</p>

<pre><code>- find_date() for date_col
- find_float_time() for time_col</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">last_cal_sample_distplot</span><span class="p">(</span><span class="s1">&#39;data/output/public_intervention_usable.pickle&#39;</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;unique_code&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;local_time&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="swarmplot" class="doc_header"><code>swarmplot</code><a href="https://github.com/FleischerResearchLab/treets/tree/master/treets/core.py#L1589" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>swarmplot</code>(<strong><code>data_scource</code></strong>, <strong><code>max_loggings</code></strong>, <strong><code>identifier</code></strong>, <strong><code>date_col</code></strong>, <strong><code>time_col</code></strong>)</p>
</blockquote>
<p>Description:</p>
<p>This function plots the swarmplot the participants from the data_scource file.</p>
<p>Input:</p>

<pre><code>- data_scource (str, pandas df): input path, file in pickle, csv or panda dataframe format.

- max_loggings (int): the max number of loggings to be plotted for each participants, loggings will be randomly selected.
- identitfier(str) : participants' unique identifier such as id, name, etc.
- date_col(str) : the column that represents the dates.
- time_col(str) : the column that represents the float time.
</code></pre>
<p>Return:</p>

<pre><code>- None

</code></pre>
<p>Requirements:</p>

<pre><code>data_scource file must have the following columns:

    - food_type

</code></pre>
<p>Optional functions to use to have proper inputs:</p>

<pre><code>- find_date() for date_col
- find_float_time() for time_col</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">swarmplot</span><span class="p">(</span><span class="s1">&#39;data/output/public.pickle&#39;</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span><span class="s1">&#39;unique_code&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;local_time&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="FoodParser" class="doc_header"><code>class</code> <code>FoodParser</code><a href="https://github.com/FleischerResearchLab/treets/tree/master/treets/core.py#L1648" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>FoodParser</code>()</p>
</blockquote>
<p>A class that reads in food loggings from the app. Used as helper function for the function clean_loggings().</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

</div>
 

